import{i as Se,c as Ae,p as ve,a as Pe,s as Ce,b as Te}from"./proj-wasm-D0cR0Dzn.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();const Me=!1,$e=(e,t)=>e===t,I={equals:$e};let se=ce;const v=1,L=2,oe={owned:null,cleanups:null,context:null,owner:null};var d=null;let J=null,xe=null,f=null,g=null,w=null,U=0;function Ge(e,t){const r=f,n=d,s=e.length===0,o=t===void 0?n:t,l=s?oe:{owned:null,cleanups:null,context:o?o.context:null,owner:o},i=s?e:()=>e(()=>$(()=>M(l)));d=l,f=null;try{return G(i,!0)}finally{f=r,d=n}}function A(e,t){t=t?Object.assign({},I,t):I;const r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=s=>(typeof s=="function"&&(s=s(r.value)),le(r,s));return[ie.bind(r),n]}function Y(e,t,r){const n=Q(e,t,!1,v);x(n)}function Oe(e,t,r){se=We;const n=Q(e,t,!1,v);n.user=!0,w?w.push(n):x(n)}function Ne(e,t,r){r=r?Object.assign({},I,r):I;const n=Q(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,x(n),ie.bind(n)}function $(e){if(f===null)return e();const t=f;f=null;try{return e()}finally{f=t}}function Re(e){Oe(()=>$(e))}function je(e){return d===null||(d.cleanups===null?d.cleanups=[e]:d.cleanups.push(e)),e}function ie(){if(this.sources&&this.state)if(this.state===v)x(this);else{const e=g;g=null,G(()=>q(this),!1),g=e}if(f){const e=this.observers?this.observers.length:0;f.sources?(f.sources.push(this),f.sourceSlots.push(e)):(f.sources=[this],f.sourceSlots=[e]),this.observers?(this.observers.push(f),this.observerSlots.push(f.sources.length-1)):(this.observers=[f],this.observerSlots=[f.sources.length-1])}return this.value}function le(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&G(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],l=J&&J.running;l&&J.disposed.has(o),(l?!o.tState:!o.state)&&(o.pure?g.push(o):w.push(o),o.observers&&ae(o)),l||(o.state=v)}if(g.length>1e6)throw g=[],new Error},!1)),t}function x(e){if(!e.fn)return;M(e);const t=U;Ie(e,e.value,t)}function Ie(e,t,r){let n;const s=d,o=f;f=d=e;try{n=e.fn(t)}catch(l){return e.pure&&(e.state=v,e.owned&&e.owned.forEach(M),e.owned=null),e.updatedAt=r+1,ue(l)}finally{f=o,d=s}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?le(e,n):e.value=n,e.updatedAt=r)}function Q(e,t,r,n=v,s){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:d,context:d?d.context:null,pure:r};return d===null||d!==oe&&(d.owned?d.owned.push(o):d.owned=[o]),o}function W(e){if(e.state===0)return;if(e.state===L)return q(e);if(e.suspense&&$(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<U);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===v)x(e);else if(e.state===L){const n=g;g=null,G(()=>q(e,t[0]),!1),g=n}}function G(e,t){if(g)return e();let r=!1;t||(g=[]),w?r=!0:w=[],U++;try{const n=e();return Le(r),n}catch(n){r||(w=null),g=null,ue(n)}}function Le(e){if(g&&(ce(g),g=null),e)return;const t=w;w=null,t.length&&G(()=>se(t),!1)}function ce(e){for(let t=0;t<e.length;t++)W(e[t])}function We(e){let t,r=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[r++]=n:W(n)}for(t=0;t<r;t++)W(e[t])}function q(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];if(n.sources){const s=n.state;s===v?n!==t&&(!n.updatedAt||n.updatedAt<U)&&W(n):s===L&&q(n,t)}}}function ae(e){for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t];r.state||(r.state=L,r.pure?g.push(r):w.push(r),r.observers&&ae(r))}}function M(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),s=r.observers;if(s&&s.length){const o=s.pop(),l=r.observerSlots.pop();n<s.length&&(o.sourceSlots[l]=n,s[n]=o,r.observerSlots[n]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)M(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)M(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function qe(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function ue(e,t=d){throw qe(e)}function De(e,t){return $(()=>e(t||{}))}const Ue=e=>Ne(()=>e());function Be(e,t,r){let n=r.length,s=t.length,o=n,l=0,i=0,a=t[s-1].nextSibling,h=null;for(;l<s||i<o;){if(t[l]===r[i]){l++,i++;continue}for(;t[s-1]===r[o-1];)s--,o--;if(s===l){const m=o<n?i?r[i-1].nextSibling:r[o-i]:a;for(;i<o;)e.insertBefore(r[i++],m)}else if(o===i)for(;l<s;)(!h||!h.has(t[l]))&&t[l].remove(),l++;else if(t[l]===r[o-1]&&r[i]===t[s-1]){const m=t[--s].nextSibling;e.insertBefore(r[i++],t[l++].nextSibling),e.insertBefore(r[--o],m),t[s]=r[o]}else{if(!h){h=new Map;let y=i;for(;y<o;)h.set(r[y],y++)}const m=h.get(t[l]);if(m!=null)if(i<m&&m<o){let y=l,S=1,O;for(;++y<s&&y<o&&!((O=h.get(t[y]))==null||O!==m+S);)S++;if(S>m-i){const B=t[l];for(;i<m;)e.insertBefore(r[i++],B)}else e.replaceChild(r[i++],t[l++])}else l++;else t[l++].remove()}}}const te="_$DX_DELEGATE";function Fe(e,t,r,n={}){let s;return Ge(o=>{s=o,t===document?e():j(t,e(),t.firstChild?null:void 0,r)},n.owner),()=>{s(),t.textContent=""}}function b(e,t,r,n){let s;const o=()=>{const i=n?document.createElementNS("http://www.w3.org/1998/Math/MathML","template"):document.createElement("template");return i.innerHTML=e,r?i.content.firstChild.firstChild:n?i.firstChild:i.content.firstChild},l=t?()=>$(()=>document.importNode(s||(s=o()),!0)):()=>(s||(s=o())).cloneNode(!0);return l.cloneNode=l,l}function Ve(e,t=window.document){const r=t[te]||(t[te]=new Set);for(let n=0,s=e.length;n<s;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,ke))}}function re(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function j(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return D(e,t,n,r);Y(s=>D(e,t(),s,r),n)}function ke(e){let t=e.target;const r=`$$${e.type}`,n=e.target,s=e.currentTarget,o=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),l=()=>{const a=t[r];if(a&&!t.disabled){const h=t[`${r}Data`];if(h!==void 0?a.call(t,h,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},i=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();o(a[0]);for(let h=0;h<a.length-2&&(t=a[h],!!l());h++){if(t._$host){t=t._$host,i();break}if(t.parentNode===s)break}}else i();o(n)}function D(e,t,r,n,s){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,l=n!==void 0;if(e=l&&r[0]&&r[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===r))return r;if(l){let i=r[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),r=C(e,r,n,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t}else if(t==null||o==="boolean")r=C(e,r,n);else{if(o==="function")return Y(()=>{let i=t();for(;typeof i=="function";)i=i();r=D(e,i,r,n)}),()=>r;if(Array.isArray(t)){const i=[],a=r&&Array.isArray(r);if(K(i,t,r,s))return Y(()=>r=D(e,i,r,n,!0)),()=>r;if(i.length===0){if(r=C(e,r,n),l)return r}else a?r.length===0?ne(e,i,n):Be(e,r,i):(r&&C(e),ne(e,i));r=i}else if(t.nodeType){if(Array.isArray(r)){if(l)return r=C(e,r,n,t);C(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function K(e,t,r,n){let s=!1;for(let o=0,l=t.length;o<l;o++){let i=t[o],a=r&&r[e.length],h;if(!(i==null||i===!0||i===!1))if((h=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))s=K(e,i,a)||s;else if(h==="function")if(n){for(;typeof i=="function";)i=i();s=K(e,Array.isArray(i)?i:[i],Array.isArray(a)?a:[a])||s}else e.push(i),s=!0;else{const m=String(i);a&&a.nodeType===3&&a.data===m?e.push(a):e.push(document.createTextNode(m))}}return s}function ne(e,t,r=null){for(let n=0,s=t.length;n<s;n++)e.insertBefore(t[n],r)}function C(e,t,r,n){if(r===void 0)return e.textContent="";const s=n||document.createTextNode("");if(t.length){let o=!1;for(let l=t.length-1;l>=0;l--){const i=t[l];if(s!==i){const a=i.parentNode===e;!o&&!l?a?e.replaceChild(s,i):e.insertBefore(s,r):a&&i.remove()}else o=!0}}else e.insertBefore(s,r);return[s]}var He=b("<main>"),Je=b("<p>Initializing proj-wasm..."),Xe=b("<p>"),Ye=b('<a href=https://github.com/birkskyum/proj4js-demo/ target=_blank rel="noopener noreferrer">GitHub Link'),X=b("<br>"),Ke=b("<button>Equal Earth"),Qe=b("<button>Web Mercator"),ze=b("<button>Vertical Perspective"),Ze=b('<svg width=800 height=800 viewBox="-20000000 -10000000 40000000 20000000">'),et=b("<svg><circle r=200000 fill=red></svg>",!1,!0,!1);function tt(){const e=u=>JSON.parse(JSON.stringify(u)),[t,r]=A(!1),[n,s]=A(null);Re(async()=>{try{await Se();const u=Ae();s(u),r(!0);const p=F("EPSG:4326",a,S),c=F("EPSG:4326",h,S),E=F("EPSG:4326",m,S);B(p),fe(c),pe(E),Z(e(c))}catch(u){console.error("Failed to initialize proj-wasm:",u)}});function o(u){const p=[];for(let c=-90;c<=90;c+=u)for(let E=-180;E<=180;E+=u)p.push([E,c]);return p}let l;(u=>{u.EqualEarth="Equal Earth",u.WebMercator="Web Mercator",u.VerticalPerspective="Vertical Perspective",u.NaturalEarth="Natural Earth"})(l||(l={}));function i(u,p,c){return u*(1-c)+p*c}const a='PROJCS["World_Equal_Earth",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Equal_Earth"],PARAMETER["false_easting",0],PARAMETER["false_northing",0],PARAMETER["longitude_of_center",0],PARAMETER["latitude_of_center",0],UNIT["Meter",1]]',h='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1],AUTHORITY["EPSG","3857"]]',m="+proj=geos +lat_0=0 +lon_0=0 +h=35785831 +datum=WGS84 +units=m +no_defs",S=o(10),[O,B]=A([]),[z,fe]=A([]),[he,pe]=A([]),F=(u,p,c)=>{if(!t()||!n())return[];try{const E=ve({context:n(),source_crs:u,target_crs:p});return c.map(([P,R])=>{const _=Pe(1);Ce(_,[[R,P,0,0]]),Te({p:E,direction:1,n:1,coord:_.malloc||_.get("malloc")});const T=_.array[0],H=_.array[1];return[T,H]})}catch(E){return console.error("Transformation error:",E),[]}},[de,ge]=A("Web Mercator"),[V,Z]=A([]),[N,ee]=A(void 0),me=(u,p,c)=>{const E=performance.now(),P=R=>{const _=R-E,T=Math.min(_/c,1);Z(u.map((H,Ee)=>{const[_e,be]=H,[we,ye]=p[Ee];return[i(_e,we,T),i(be,ye,T)]})),T<1&&ee(requestAnimationFrame(P))};ee(requestAnimationFrame(P))},k=u=>{N()&&cancelAnimationFrame(N()),ge(u);let p;switch(u){case"Web Mercator":p=e(z());break;case"Vertical Perspective":p=e(he());break;case"Equal Earth":p=e(O());break;default:p=e(z());break}p.length>0&&me(e(V()),e(p),3e3)};return je(()=>{N()&&cancelAnimationFrame(N())}),console.log("Lat/Lng Grid",S),console.log("EqualEarth Grid",V()),(()=>{var u=He();return j(u,(()=>{var p=Ue(()=>!t());return()=>p()?Je():[(()=>{var c=Xe();return j(c,()=>"Showing "+de()),c})(),Ye(),X(),X(),(()=>{var c=Ke();return c.$$click=()=>k("Equal Earth"),c})(),(()=>{var c=Qe();return c.$$click=()=>k("Web Mercator"),c})(),(()=>{var c=ze();return c.$$click=()=>k("Vertical Perspective"),c})(),X(),(()=>{var c=Ze();return c.style.setProperty("border","1px solid black"),j(c,()=>V().map(([E,P],R)=>(()=>{var _=et();return re(_,"cx",E),re(_,"cy",-P),_})())),c})()]})()),u})()}Ve(["click"]);const rt=document.getElementById("root");Fe(()=>De(tt,{}),rt);const st=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{st as _};
